<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digital Heritage 3D</title>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
</head>
<body>
  <h1>Digital Heritage 3D</h1>
  <p>Interactive 3D cultural objects with metadata.</p>

  <h2>Object Metadata</h2>
  <div id="metadata"></div>

  <h2>3D Viewer</h2>
  <div id="viewer" style="width:600px; height:400px; border:1px solid #aaa;"></div>

  <script>
    // --- 3D VIEWER ---
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x333333);

    const camera = new THREE.PerspectiveCamera(75, 600/400, 0.1, 1000);
    camera.position.z = 5;

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(600, 400);
    document.getElementById("viewer").appendChild(renderer.domElement);

    // Cube (placeholder for real models later)
    const geometry = new THREE.BoxGeometry(1, 1, 1);
    const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
    const cube = new THREE.Mesh(geometry, material);
    scene.add(cube);

    function animate() {
      requestAnimationFrame(animate);
      cube.rotation.x += 0.02;
      cube.rotation.y += 0.02;
      renderer.render(scene, camera);
    }
    animate();

    // --- METADATA LOADER ---
    fetch("../data/sample_metadata.json")
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById("metadata");
        data.forEach(item => {
          container.innerHTML += `
            <h3>${item.title}</h3>
            <p><strong>Description:</strong> ${item.description}</p>
            <p><strong>Date:</strong> ${item.date}</p>
            <p><strong>Material:</strong> ${item.material}</p>
            <p><strong>Dimensions:</strong> ${item.dimensions}</p>
            <p><strong>Location Found:</strong> ${item.location_found}</p>
            <p><strong>Cultural Context:</strong> ${item.cultural_context}</p>
            <img src="${item.preview_image}" alt="Preview" style="max-width:200px;"/>
          `;
        });
      })
      .catch(error => console.error("Error loading JSON:", error));
  </script>
</body>
</html>
